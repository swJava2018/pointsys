// https://dbdiagram.io/d

Table user {
  id integer [pk]
  role varchar [not null]
  created_at datetime [not null]
}

Table point_spec {
  id integer [pk]
  min_save_amount integer [not null]
  max_save_amount integer [not null]
  min_days_from_now integer [not null]
  max_days_from_now integer [not null]
  default_expiry_days integer [not null]
  created_at datetime [not null]
}

Table user_point_limit {
  user_id integer
  point_spec_id integer
  max_earning_limit integer [not null]
  updated_at datetime [not null]

  indexes {
    (user_id, point_spec_id) [pk]
  }
}

Ref: user.id < user_point_limit.user_id
Ref: point_spec.id < user_point_limit.point_spec_id

Table point {
  id integer [pk]
  user_id integer [not null]
  point_spec_id integer [not null]
  amount integer [not null]
  expiry_date datetime
  type varchar [not null]
  state integer [not null]
  created_at datetime [not null]
  updated_at datetime [not null]
}

Ref: point_spec.id < point.point_spec_id
Ref: user.id < point.user_id

Table point_balance {
  point_id integer [pk]
  remaining_amount integer [not null]
  created_at datetime [not null]
  updated_at datetime [not null]
}

Ref: point_balance.point_id - point.id

Table point_usage {
  id integer [pk]
  order_id varchar [not null]
  point_id integer [not null]
  amount integer [not null]
  created_at datetime [not null]
  updated_at datetime [not null]
}

Ref: point_usage.point_id > point.id